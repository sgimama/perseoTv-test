(this["webpackJsonpperseo-tv"]=this["webpackJsonpperseo-tv"]||[]).push([[0],{44:function(e,t,a){},45:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),s=a.n(c),r=a(18),i=a.n(r),o=(a(44),a(45),a(15)),u=a(4),l=a(12),p=a(36),d=a.n(p),j=a(11),b=a(3),O=a(9),v=a.n(O),f=a(13),h=a(16),x=a.n(h),m={ApiRequest:{request:{baseURL:"https://dev.perseo.tv/ws",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}},urls:{LOGIN:"/Login.php",MAIN:"/GetView.php",PLAYER:"/Play.php"},actionsTypes:{LOGIN:"LOGIN",LOGIN_ERROR:"LOGIN_ERROR",INIT_MAIN:"INIT_MAIN",LOADING:"LOADING",FAVORITE:"FAVORITE"}}},R={Session:{Login:function(e){return function(){var t=Object(f.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g(m.ApiRequest.actionsTypes.LOADING,a),n=null,t.prev=2,t.next=5,x.a.post("".concat(m.ApiRequest.request.baseURL+m.ApiRequest.urls.LOGIN),e,{headers:m.ApiRequest.request.headers});case 5:n=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0);case 11:return t.prev=11,n.data.authorized&&!n.data.error?a({type:m.ApiRequest.actionsTypes.LOGIN,data:{token:n.data.token}}):a({type:m.ApiRequest.actionsTypes.LOGIN_ERROR,data:n.data}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[2,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()}},App:{Main:function(e){return function(){var t=Object(f.a)(v.a.mark((function t(a){var n,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g(m.ApiRequest.actionsTypes.LOADING,a),n=null,c=[],t.prev=3,t.next=6,x.a.post("".concat(m.ApiRequest.request.baseURL+m.ApiRequest.urls.MAIN),e,{headers:m.ApiRequest.request.headers});case 6:(n=t.sent).data.contents.map((function(e){var t={};t=n.data.user.favs.indexOf(e.id)?Object(b.a)(Object(b.a)({},e),{},{fav:!1}):Object(b.a)(Object(b.a)({},e),{},{fav:!0}),c.push(t)})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0);case 13:return t.prev=13,a({type:m.ApiRequest.actionsTypes.INIT_MAIN,data:{user:{name:n.data.user.name,avatar:n.data.user.avatar},contents:c}}),t.abrupt("return",n.data);case 17:case"end":return t.stop()}}),t,null,[[3,10,13,17]])})));return function(e){return t.apply(this,arguments)}}()},Player:function(e){return function(){var t=Object(f.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g(m.ApiRequest.actionsTypes.LOADING,a),n=null,t.prev=2,t.next=5,x.a.post("".concat(m.ApiRequest.request.baseURL+m.ApiRequest.urls.PLAYER),e,{headers:m.ApiRequest.request.headers});case 5:n=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0);case 11:return t.prev=11,t.abrupt("return",n.data.url);case 14:case"end":return t.stop()}}),t,null,[[2,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()},Favorite:function(e){return function(){var t=Object(f.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:m.ApiRequest.actionsTypes.FAVORITE,data:Object(b.a)({},e)});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}},g=function(e,t){t({type:e,data:{loading:!0}})},A=R,N=(a(70),function(){return Object(n.jsx)("div",{className:"loading"})}),y=(a(71),Object(j.b)((function(e){return{state:e}}),(function(e){return{login:function(t){A.Session.Login(t)(e)}}}))((function(e){var t=Object(c.useState)(""),a=Object(l.a)(t,2),s=a[0],r=a[1],i=Object(c.useState)(""),o=Object(l.a)(i,2),p=o[0],j=o[1];return Object(n.jsxs)("div",{className:"login-page",children:[Object(n.jsxs)("div",{className:"form",children:[Object(n.jsxs)("form",{className:"login-form",onSubmit:function(t){t.preventDefault();var a=new URLSearchParams;a.append("user",s),a.append("pass",d()(p)),a.append("device","Web"),e.login(a)},children:[Object(n.jsx)("input",{type:"email",name:"user",id:"user",value:s,placeholder:"Email",onChange:function(e){r(e.target.value)}}),Object(n.jsx)("input",{type:"password",name:"pass",id:"pass",value:p,placeholder:"Password",onChange:function(e){j(e.target.value)}}),Object(n.jsx)("button",{type:"submit",children:"Login"})]}),e.state.login.error&&Object(n.jsx)("div",{className:"error",children:e.state.login.message})]}),e.state.loading&&Object(n.jsx)(N,{}),e.state.token&&Object(n.jsx)(u.a,{to:"/main"})]})}))),I=(a(73),function(e){var t;return Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)("img",{src:e.videoData.cover,alt:e.videoData.title}),Object(n.jsxs)("div",{className:"card-info",children:[Object(n.jsx)("label",{className:"label-gray",children:"Title"}),Object(n.jsx)("label",{className:"label-black",children:e.videoData.title}),Object(n.jsx)("label",{className:"label-gray",children:"Duration"}),Object(n.jsx)("label",{className:"label-black",children:(t=e.videoData.duration,t=Number(t),Math.floor(t/3600)+":"+Math.floor(t%3600/60)+":"+Math.floor(t%3600%60))}),Object(n.jsx)("label",{className:"label-gray",children:"Section"}),Object(n.jsxs)("label",{className:"label-black",children:[" ",e.videoData.section]}),Object(n.jsx)("hr",{}),Object(n.jsxs)("div",{children:[Object(n.jsx)(o.b,{to:"video/".concat(e.videoData.id),children:Object(n.jsx)("i",{alt:"Play video",class:"material-icons",children:"play_circle_outline"})}),Object(n.jsx)(o.b,{onClick:function(){return function(t,a){var n={id:t,action:a};e.changeFav(n)}(e.videoData.id,!e.videoData.fav)},children:Object(n.jsx)("i",{alt:"add favorite",class:"material-icons",children:e.videoData.fav?"favorite":"favorite_border"})})]})]})]})}),q=(a(74),Object(j.b)((function(e){return{state:e}}),(function(e){return{main:function(t){A.App.Main(t)(e)},fav:function(t){A.App.Favorite(t)(e)}}}))((function(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),s=a[0],r=a[1],i=Object(c.useState)(""),o=Object(l.a)(i,2),u=o[0],p=o[1];Object(c.useEffect)((function(){var t=new URLSearchParams;t.append("token",e.state.token),t.append("device","Web"),e.main(t)}),[]);var d=function(t){e.fav(t)};return Object(n.jsxs)("div",{children:[Object(n.jsx)("header",{className:"header",children:Object(n.jsx)("div",{className:"search",children:Object(n.jsx)("input",{type:"text",placeholder:"Search...",value:u,onChange:function(t){p(t.target.value);var a=[];t.target.value.length>=0?e.state.contents.map((function(e){var n={};e.title.toLowerCase().includes(t.target.value.toLowerCase())&&(n=Object(b.a)({},e),a.push(n))})):a=[],r(a)}})})}),Object(n.jsxs)("div",{className:"card-grid",children:[u.length>0?s.map((function(e){return Object(n.jsx)(I,{videoData:e,changeFav:d},e.id)})):e.state.contents.map((function(e){return Object(n.jsx)(I,{videoData:e,changeFav:d},e.id)})),e.state.loading&&Object(n.jsx)(N,{})]})]})}))),L=a(38),k=a.n(L),w=(a(75),Object(j.b)((function(e){return{state:e}}),(function(e){return{player:function(t){A.App.Player(t)(e)}}}))((function(e){var t=Object(c.useState)(""),a=Object(l.a)(t,2),s=a[0],r=a[1];function i(){return(i=Object(f.a)(v.a.mark((function t(){var a,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new URLSearchParams).append("token",e.state.token),a.append("device","Web"),a.append("id",e.match.params.id),n=null,t.prev=5,t.next=8,x.a.post("".concat(m.ApiRequest.request.baseURL+m.ApiRequest.urls.PLAYER),a,{headers:m.ApiRequest.request.headers});case 8:n=t.sent,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5),console.log(t.t0);case 14:return t.prev=14,r(n.data.url),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[5,11,14,17]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){i.apply(this,arguments)}()}),[]),Object(n.jsx)("div",{children:Object(n.jsx)(k.a,{className:"video",url:s,autoplay:!1,controls:!0})})}))),T=function(){return Object(n.jsx)(o.a,{children:Object(n.jsx)("div",{children:Object(n.jsxs)(u.d,{children:[Object(n.jsx)(u.b,{path:"/",component:y,exact:!0}),Object(n.jsx)(u.b,{path:"/main",component:q,exact:!0}),Object(n.jsx)(u.b,{path:"/video/:id",component:w,exact:!0}),Object(n.jsx)(u.b,{component:y})]})})})};var D=function(e){return Object(n.jsx)(T,{})},G=a(20),E={user:{},contents:[],login:{},token:"",loading:!1};function S(e,t){var a=[];return t.contents.map((function(t){var n={};n=t.id.indexOf(e.id)?Object(b.a)({},t):Object(b.a)(Object(b.a)({},t),{},{fav:e.action}),a.push(n)})),a}var M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data;switch(a){case m.ApiRequest.actionsTypes.LOGIN:return Object(b.a)(Object(b.a)({},e),{},{token:n.token,loading:!1});case m.ApiRequest.actionsTypes.LOGIN_ERROR:return Object(b.a)(Object(b.a)({},e),{},{login:n,loading:!1});case m.ApiRequest.actionsTypes.INIT_MAIN:return Object(b.a)(Object(b.a)({},e),{},{contents:n.contents,user:n.user,loading:!1});case m.ApiRequest.actionsTypes.LOADING:return Object(b.a)(Object(b.a)({},e),{},{loading:n.loading});case m.ApiRequest.actionsTypes.FAVORITE:var c=S(n,e);return Object(b.a)(Object(b.a)({},e),{},{contents:c});default:return e}},P=Object(G.b)(M);i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(j.a,{store:P,children:Object(n.jsx)(D,{})})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.ab60635e.chunk.js.map