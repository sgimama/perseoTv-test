{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sergiogimenez/Documents/prueba/perseo-tv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sergiogimenez/Documents/prueba/perseo-tv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sergiogimenez/Documents/prueba/perseo-tv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import axios from'axios';import React,{useEffect,useState}from'react';import ReactHlsPlayer from'react-hls-player';import{connect}from\"react-redux\";import ApiRequest from'../../services/api/Api-request';import Config from'../../services/config/Config';import'./Video.css';export var Video=function Video(props){//let url;\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),url=_useState2[0],setUrl=_useState2[1];function loadVideo(){return _loadVideo.apply(this,arguments);}function _loadVideo(){_loadVideo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var params,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:params=new URLSearchParams();params.append(\"token\",props.state.token);params.append(\"device\",\"Web\");params.append(\"id\",props.match.params.id);res=null;_context.prev=5;_context.next=8;return axios.post(\"\".concat(Config.ApiRequest.request.baseURL+Config.ApiRequest.urls.PLAYER),params,{headers:Config.ApiRequest.request.headers});case 8:res=_context.sent;_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](5);console.log(_context.t0);case 14:_context.prev=14;setUrl(res.data.url);return _context.finish(14);case 17:case\"end\":return _context.stop();}}},_callee,null,[[5,11,14,17]]);}));return _loadVideo.apply(this,arguments);}useEffect(function(){loadVideo();},[]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ReactHlsPlayer,{className:\"video\",url:url,autoplay:false,controls:true})});};var mapStateToProps=function mapStateToProps(state){return{state:state};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{player:function player(params){ApiRequest.App.Player(params)(dispatch);}};};var connectedVideo=connect(mapStateToProps,mapDispatchToProps)(Video);export default connectedVideo;","map":{"version":3,"sources":["/Users/sergiogimenez/Documents/prueba/perseo-tv/src/components/video/Video.jsx"],"names":["axios","React","useEffect","useState","ReactHlsPlayer","connect","ApiRequest","Config","Video","props","url","setUrl","loadVideo","params","URLSearchParams","append","state","token","match","id","res","post","request","baseURL","urls","PLAYER","headers","console","log","data","mapStateToProps","mapDispatchToProps","dispatch","player","App","Player","connectedVideo"],"mappings":"0hBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,gCAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,8BAAnB,CACA,MAAO,aAAP,CAGA,MAAO,IAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAW,CAC5B;AAD4B,cAENN,QAAQ,CAAC,EAAD,CAFF,wCAErBO,GAFqB,eAEhBC,MAFgB,uBAIjBC,CAAAA,SAJiB,qIAIhC,kJACUC,MADV,CACmB,GAAIC,CAAAA,eAAJ,EADnB,CAEID,MAAM,CAACE,MAAP,CAAc,OAAd,CAAuBN,KAAK,CAACO,KAAN,CAAYC,KAAnC,EACAJ,MAAM,CAACE,MAAP,CAAc,QAAd,CAAwB,KAAxB,EACAF,MAAM,CAACE,MAAP,CAAc,IAAd,CAAoBN,KAAK,CAACS,KAAN,CAAYL,MAAZ,CAAmBM,EAAvC,EACIC,GALR,CAKc,IALd,uCAOkBpB,CAAAA,KAAK,CAACqB,IAAN,WAAcd,MAAM,CAACD,UAAP,CAAkBgB,OAAlB,CAA0BC,OAA1B,CAAoChB,MAAM,CAACD,UAAP,CAAkBkB,IAAlB,CAAuBC,MAAzE,EAAmFZ,MAAnF,CAA2F,CACrGa,OAAO,CAAEnB,MAAM,CAACD,UAAP,CAAkBgB,OAAlB,CAA0BI,OADkE,CAA3F,CAPlB,QAOMN,GAPN,gGAaMO,OAAO,CAACC,GAAR,cAbN,yBAgBMjB,MAAM,CAACS,GAAG,CAACS,IAAJ,CAASnB,GAAV,CAAN,CAhBN,sGAJgC,4CA0B5BR,SAAS,CAAC,UAAM,CACZU,SAAS,GACZ,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACI,kCACI,KAAC,cAAD,EAAgB,SAAS,CAAC,OAA1B,CACE,GAAG,CAAEF,GADP,CAEE,QAAQ,CAAE,KAFZ,CAGE,QAAQ,CAAE,IAHZ,EADJ,EADJ,CASH,CAvCM,CAwCP,GAAMoB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACd,KAAD,QAAY,CAAEA,KAAK,CAAEA,KAAT,CAAZ,EAAxB,CAEA,GAAMe,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,QAAe,CACtCC,MAAM,CAAE,gBAACpB,MAAD,CAAY,CACpBP,UAAU,CAAC4B,GAAX,CAAeC,MAAf,CAAsBtB,MAAtB,EAA8BmB,QAA9B,EACD,CAHuC,CAAf,EAA3B,CAMA,GAAMI,CAAAA,cAAc,CAAG/B,OAAO,CAC5ByB,eAD4B,CAE5BC,kBAF4B,CAAP,CAGrBvB,KAHqB,CAAvB,CAKA,cAAe4B,CAAAA,cAAf","sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useState } from 'react'\nimport ReactHlsPlayer from 'react-hls-player';\nimport { connect } from \"react-redux\";\nimport ApiRequest from '../../services/api/Api-request';\nimport Config from '../../services/config/Config';\nimport './Video.css';\n\n\nexport const Video = (props) => {\n    //let url;\n    const [url, setUrl] = useState('')\n\nasync function loadVideo(){\n    const params = new URLSearchParams();\n    params.append(\"token\", props.state.token);\n    params.append(\"device\", \"Web\");\n    params.append(\"id\", props.match.params.id);\n    let res = null;\n    try {\n      res = await axios.post(`${Config.ApiRequest.request.baseURL + Config.ApiRequest.urls.PLAYER}`, params, {\n        headers: Config.ApiRequest.request.headers\n      })\n      \n\n    } catch (e) {\n      console.log(e);\n    } finally {\n    \n      setUrl(res.data.url);\n    }\n\n}\n\n\n    useEffect(() => {\n        loadVideo()\n    }, [])\n\n    return (\n        <div >\n            <ReactHlsPlayer className=\"video\"\n              url={url}\n              autoplay={false}\n              controls={true}\n          />\n        </div>\n    )\n}\nconst mapStateToProps = (state) => ({ state: state });\n      \nconst mapDispatchToProps = (dispatch) => ({\n    player: (params) => {\n    ApiRequest.App.Player(params)(dispatch);\n  },\n});\n\nconst connectedVideo = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Video);\n\nexport default connectedVideo;"]},"metadata":{},"sourceType":"module"}