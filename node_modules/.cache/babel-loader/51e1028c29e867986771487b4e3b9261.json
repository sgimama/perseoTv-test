{"ast":null,"code":"import _objectSpread from\"/Users/sergiogimenez/Documents/prueba/perseo-tv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/sergiogimenez/Documents/prueba/perseo-tv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sergiogimenez/Documents/prueba/perseo-tv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import Config from'../config/Config';var ApiRequest={Session:{Login:function Login(params){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(Config.ApiRequest.actionsTypes.LOADING,dispatch);res=null;_context.prev=2;_context.next=5;return axios.post(\"\".concat(Config.ApiRequest.request.baseURL+Config.ApiRequest.urls.LOGIN),params,{headers:Config.ApiRequest.request.headers});case 5:res=_context.sent;_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](2);console.log(_context.t0);case 11:_context.prev=11;if(res.data.authorized&&!res.data.error){dispatch({type:Config.ApiRequest.actionsTypes.LOGIN,data:{token:res.data.token}});}else{dispatch({type:Config.ApiRequest.actionsTypes.LOGIN_ERROR,data:res.data});}return _context.finish(11);case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,8,11,14]]);}));return function(_x){return _ref.apply(this,arguments);};}();}},App:{Main:function Main(params){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res,contentsFavs;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(Config.ApiRequest.actionsTypes.LOADING,dispatch);res=null;contentsFavs=[];_context2.prev=3;_context2.next=6;return axios.post(\"\".concat(Config.ApiRequest.request.baseURL+Config.ApiRequest.urls.MAIN),params,{headers:Config.ApiRequest.request.headers});case 6:res=_context2.sent;res.data.contents.map(function(content){var newContent={};if(!res.data.user.favs.indexOf(content.id)){newContent=_objectSpread(_objectSpread({},content),{},{fav:true});}else{newContent=_objectSpread(_objectSpread({},content),{},{fav:false});}contentsFavs.push(newContent);});_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](3);console.log(_context2.t0);case 13:_context2.prev=13;dispatch({type:Config.ApiRequest.actionsTypes.INIT_MAIN,data:{user:{name:res.data.user.name,avatar:res.data.user.avatar},contents:contentsFavs}});return _context2.abrupt(\"return\",res.data);case 17:case\"end\":return _context2.stop();}}},_callee2,null,[[3,10,13,17]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();},Player:function Player(params){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setLoading(Config.ApiRequest.actionsTypes.LOADING,dispatch);res=null;_context3.prev=2;_context3.next=5;return axios.post(\"\".concat(Config.ApiRequest.request.baseURL+Config.ApiRequest.urls.PLAYER),params,{headers:Config.ApiRequest.request.headers});case 5:res=_context3.sent;_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](2);console.log(_context3.t0);case 11:_context3.prev=11;return _context3.abrupt(\"return\",res.data.url);case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[2,8,11,14]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();},Favorite:function Favorite(params){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:Config.ApiRequest.actionsTypes.FAVORITE,data:_objectSpread({},params)});case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();}}};var setLoading=function setLoading(action,dispatch){dispatch({type:action,data:{loading:true}});};export default ApiRequest;","map":{"version":3,"sources":["/Users/sergiogimenez/Documents/prueba/perseo-tv/src/services/api/Api-request.js"],"names":["axios","Config","ApiRequest","Session","Login","params","dispatch","setLoading","actionsTypes","LOADING","res","post","request","baseURL","urls","LOGIN","headers","console","log","data","authorized","error","type","token","LOGIN_ERROR","App","Main","contentsFavs","MAIN","contents","map","content","newContent","user","favs","indexOf","id","fav","push","INIT_MAIN","name","avatar","Player","PLAYER","url","Favorite","FAVORITE","action","loading"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport Config from '../config/Config';\n\nconst ApiRequest = {\n  Session: {\n    Login: (params) => {\n      return async (dispatch) => {\n        setLoading(Config.ApiRequest.actionsTypes.LOADING, dispatch);\n        let res = null;\n        try {\n          res = await axios.post(`${Config.ApiRequest.request.baseURL + Config.ApiRequest.urls.LOGIN}`, params, {\n            headers: Config.ApiRequest.request.headers\n          })\n\n        } catch (e) {\n          console.log(e);\n        } finally {\n          if (res.data.authorized && !res.data.error) {\n            dispatch({\n              type: Config.ApiRequest.actionsTypes.LOGIN,\n              data: {\n                token: res.data.token\n              }\n            });\n          } else {\n            dispatch({\n              type: Config.ApiRequest.actionsTypes.LOGIN_ERROR,\n              data: res.data\n            });\n          }\n        }\n      }\n    }\n  },\n  App: {\n    Main: (params) => {\n      return async (dispatch) => {\n        setLoading(Config.ApiRequest.actionsTypes.LOADING, dispatch);\n        let res = null;\n        let contentsFavs = [];\n        try {\n          res = await axios.post(`${Config.ApiRequest.request.baseURL + Config.ApiRequest.urls.MAIN}`, params, {\n            headers: Config.ApiRequest.request.headers\n          })\n\n\n          res.data.contents.map(content => {\n            let newContent = {};\n            if (!res.data.user.favs.indexOf(content.id)) {\n              newContent = {\n                ...content,\n                fav: true\n              }\n            } else {\n              newContent = {\n                ...content,\n                fav: false\n              }\n            }\n            contentsFavs.push(newContent)\n          })\n        } catch (e) {\n          console.log(e);\n        } finally {\n          dispatch({\n            type: Config.ApiRequest.actionsTypes.INIT_MAIN,\n            data: {\n              user: {\n                name: res.data.user.name,\n                avatar: res.data.user.avatar\n              },\n              contents: contentsFavs\n            }\n          });\n          return res.data;\n        }\n      }\n    },\n    Player: (params) => {\n      return async (dispatch) => {\n        setLoading(Config.ApiRequest.actionsTypes.LOADING, dispatch);\n        let res = null;\n        try {\n          res = await axios.post(`${Config.ApiRequest.request.baseURL + Config.ApiRequest.urls.PLAYER}`, params, {\n            headers: Config.ApiRequest.request.headers\n          })\n        } catch (e) {\n          console.log(e);\n        } finally {\n          return res.data.url;\n        }\n      }\n    },\n    Favorite: (params) => {\n      return async (dispatch) => {\n\n      dispatch({\n        type: Config.ApiRequest.actionsTypes.FAVORITE,\n        data: { \n          ...params\n        }\n      });\n      }\n    }\n  }\n}\n\nconst setLoading = (action, dispatch) => {\n  dispatch({\n    type: action,\n    data: {\n      loading: true,\n    },\n  });\n};\n\nexport default ApiRequest;"]},"metadata":{},"sourceType":"module"}